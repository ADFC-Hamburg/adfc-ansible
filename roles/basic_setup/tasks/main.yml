# benötigte Programme installieren
  - name: Installiere Pakete
    apt:
      name: "{{ basic_setup_base_packages }}"

  - name: Setup Journald Settings
    template:
      src: base-journald.conf
      dest: /etc/systemd/journald.conf
      mode: "0644"
    notify: restart journald

  - name: Downloadverzeichnis für deb-Pakete erstellen
    file:
      path: /usr/local/share/ansible_downloads/
      state: directory
      mode: 0755

# Schlafen von clients deaktivieren
  - name: Prevent all sleep modes with sleep.conf
    blockinfile:
      path: /etc/systemd/sleep.conf
      insertafter: "^[Sleep]"
      block: |
        AllowSuspend=no
        AllowHibernation=no
        AllowSuspendThenHibernate=no
        AllowHybridSleep=no
    when: ansible_distribution_version == '20.04'

  - name: Prevent all sleep modes with mask
    command:
      cmd: systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target
    changed_when: false
    when: ansible_distribution_version == '18.04'
