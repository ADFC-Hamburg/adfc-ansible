dynamic_jitsi_scaler_testcases:
  - name: Leave on vbh01
    participants:
      meet: 10
      vbh01: 8
      vbh02: null
    conferences:
      meet: 1
      vbh01: 1
      vbh02: null
    hcloud_api: |
      [ {
        "id": 42,
        "name": "vbh01.meet.adfc-intern.de",
        "status": "running",
        "created": "{{ lookup('pipe','date -d "-50 min" +%Y-%m-%dT%H:%M:%S%:z') }}",
        "labels": {},
        "volumes": []
      }]
    result:
      playbook_setup_vbh01: false
      playbook_delete_vbh01: false
      playbook_setup_vbh02: false
      playbook_delete_vbh02: false

  - name: Leave off
    participants:
      meet: 4
      vbh01: null
      vbh02: null
    conferences:
      meet: 1
      vbh01: null
      vbh02: null
    hcloud_api: []
    result:
      playbook_setup_vbh01: false
      playbook_delete_vbh01: false
      playbook_setup_vbh02: false
      playbook_delete_vbh02: false

  - name: Modulo Test
    participants:
      meet: 2
      vbh01: 2
      vbh02: null
    conferences:
      meet: 1
      vbh01: 1
      vbh02: null
    hcloud_api: |
      [ {
        "id": 42,
        "name": "vbh01.meet.adfc-intern.de",
        "status": "running",
        "created": "{{ lookup('pipe','date -d "-20 min" +%Y-%m-%dT%H:%M:%S%:z') }}",
        "labels": {},
        "volumes": []
      }]
    result:
      playbook_setup_vbh01: false
      playbook_delete_vbh01: false
      playbook_setup_vbh02: false
      playbook_delete_vbh02: false

  - name: Switch on
    participants:
      meet: 18
      vbh01: null
      vbh02: null
    conferences:
      meet: 3
      vbh01: null
      vbh02: null
    hcloud_api: []
    result:
      playbook_setup_vbh01: true
      playbook_delete_vbh01: false
      playbook_setup_vbh02: false
      playbook_delete_vbh02: false

  - name: Switch off
    participants:
      meet: 2
      vbh01: 0
      vbh02: null
    conferences:
      meet: 1
      vbh01: 0
      vbh02: null
    hcloud_api: |
      [ {
        "id": 42,
        "name": "vbh01.meet.adfc-intern.de",
        "status": "running",
        "created": "{{ lookup('pipe','date -d "-50 min" +%Y-%m-%dT%H:%M:%S%:z') }}",
        "labels": {},
        "volumes": []
      }]
    result:
      playbook_setup_vbh01: false
      playbook_delete_vbh01: true
      playbook_setup_vbh02: false
      playbook_delete_vbh02: false
