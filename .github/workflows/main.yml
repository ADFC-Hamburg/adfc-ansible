# GitHub Actions docs
# https://help.github.com/en/articles/about-github-actions
# https://help.github.com/en/articles/workflow-syntax-for-github-actions
# see also: https://github.com/filipesilva/ng-github-actions/blob/master/.github/workflows/main.yml
name: CI

on: [push]

jobs:
  build:

    # Machine environment:
    runs-on: ubuntu-18.04

    steps:
    - name: install ansible-lint
      run: |
       pip install --upgrade setuptools wheel
       pip install ansible-lint ansible
    - name: Checkout
      uses: actions/checkout@v2
    - name: Fetch Roles Ansible-Galaxy
      run: ansible-galaxy install -r requirements.yml
    - name: lint files
      run: ~/.local/bin/ansible-lint --exclude=/home/runner/.ansible/roles/jnv.unattended-upgrades/ -x '504,301,701' *.yml
